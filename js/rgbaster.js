function coverColor(){var e=document.getElementById("post-top-bg")?.style.backgroundImage.slice(5,-2);console.log(e),void 0!==e&&RGBaster.colors(e,{paletteSize:30,exclude:["rgb(255,255,255)","rgb(0,0,0)","rgb(254,254,254)"],success:function(e){if("rgb(66,90,239)"!=e.dominant){const n=e.dominant.match(/\d+/g);var t=`rgb(${n[0]},${n[1]},${n[2]})`;"light"==getContrastYIQ(colorHex(t))&&(t=LightenDarkenColor(colorHex(t),-40)),document.getElementById("page-header").style.backgroundColor=t;var r=document.createElement("style"),o="#page-header #post-top-cover::after { box-shadow: 110px -130px 300px 60px "+t+" inset; }";r.appendChild(document.createTextNode(o)),document.head.appendChild(r),document.getElementById("post-top-cover").classList.add("loaded")}}})}function colorHex(e){var t=e;if(/^(rgb|RGB)/.test(t)){for(var r=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),o="#",n=0;n<r.length;n++){var a=Number(r[n]).toString(16);"0"===a&&(a+=a),o+=a}return 7!==o.length&&(o=t),o}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t))return t;var c=t.replace(/#/,"").split("");if(6===c.length)return t;if(3===c.length){var l="#";for(n=0;n<c.length;n+=1)l+=c[n]+c[n];return l}}function colorRgb(e){var t=e.toLowerCase();if(t&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){for(var r="#",o=1;o<4;o+=1)r+=t.slice(o,o+1).concat(t.slice(o,o+1));t=r}var n=[];for(o=1;o<7;o+=2)n.push(parseInt("0x"+t.slice(o,o+2)));return"rgb("+n.join(",")+")"}return t}function LightenDarkenColor(e,t){var r=!1;"#"==e[0]&&(e=e.slice(1),r=!0);var o=parseInt(e,16),n=(o>>16)+t;n>255?n=255:n<0&&(n=0);var a=(o>>8&255)+t;a>255?a=255:a<0&&(a=0);var c=(255&o)+t;return c>255?c=255:c<0&&(c=0),(r?"#":"")+String("000000"+(c|a<<8|n<<16).toString(16)).slice(-6)}function getContrastYIQ(e){var t,r=colorRgb(e).match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return t=299*r[1]+587*r[2]+114*r[3],(t/=255e3)>=.5?"light":"dark"}document.addEventListener("pjax:complete",coverColor),document.addEventListener("DOMContentLoaded",coverColor);